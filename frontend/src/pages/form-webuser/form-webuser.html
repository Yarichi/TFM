<!--
  Generated template for the FormWebuserPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>form-webuser</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <form [formGroup]="credentialsForm">
    <ion-grid fixed>

      <ion-item >
          <ion-label floating>Name</ion-label>
          <ion-input formControlName="name" type="text" *ngIf="user?.name;else nameEmpty">{{user.name}}</ion-input>
          <ng-template #nameEmpty><ion-input formControlName="name" type="text"></ion-input></ng-template>
      </ion-item>

      <ion-item>
          <ion-label floating>Last name</ion-label>
          <ion-input formControlName="lastName" type="text" *ngIf="user?.lastName;else lastNameEmpty" [(ngModel)]="user.lastName"></ion-input>
          <ng-template #lastNameEmpty><ion-input formControlName="lastName" type="text"></ion-input></ng-template>
      </ion-item>
      <ion-item>
        <ion-label floating>Email</ion-label>
        <ion-input formControlName="mail" type="text" *ngIf="user?.mail;else emailEmpty" [(ngModel)]="user.mail"></ion-input>
        <ng-template #emailEmpty><ion-input formControlName="mail" type="text"></ion-input></ng-template>
      </ion-item>
      <br>
      <ion-item>
          <ion-label floating>Phone number</ion-label>
          <ion-input formControlName="phone" type="text" *ngIf="user?.phone;else phoneEmpty" [(ngModel)]="user.phone"></ion-input>
          <ng-template #phoneEmpty><ion-input formControlName="phone" type="text"></ion-input></ng-template>
      </ion-item>
      <br>
      <ion-item >
          <ion-label floating>Telegram Alias (Optional)</ion-label>
          <ion-input formControlName="telegramAlias" type="text" *ngIf="user?.telegramAlias;else telegramEmpty" [(ngModel)]="user.telegramAlias"></ion-input>
          <ng-template #telegramEmpty><ion-input formControlName="telegramAlias" type="text"></ion-input></ng-template>
      </ion-item>

      <ion-item>
          <ion-label floating>Occupation</ion-label>
          <ion-input formControlName="occupation" type="text" *ngIf="user?.occupation;else occupationEmpty" [(ngModel)]="user.occupation"></ion-input>
          <ng-template #occupationEmpty><ion-input formControlName="occupation" type="text"></ion-input></ng-template>
      </ion-item>
      
      <ion-item *ngIf="!user?.occupation">
          <ion-label floating>Password</ion-label>
          <ion-input formControlName="password" type="password"></ion-input>
      </ion-item>      
    
      <ion-row>
        <ion-col text-center>

          <button ion-button block color="secondary"  (click)="onUpdateUser(user.userId, user)" *ngIf="user?.name;else buttonCreate">
              Update web user
          </button>
          <ng-template #buttonCreate>
              <button ion-button block color="secondary" [disabled]="!credentialsForm.valid" (click)="onAddUser()" >
                  Create web user
              </button>
          </ng-template>

        </ion-col>
      </ion-row>
    
      <!-- <ion-row>
        <ion-col text-center>
          <button ion-button clear color="dark" (click)="onForgotPassword()">
            Forgot your password?
          </button>
        </ion-col>
      </ion-row> -->

    </ion-grid>
  
  </form>
</ion-content>
